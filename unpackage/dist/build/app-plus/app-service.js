if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((o=>t.resolve(e()).then((()=>o))),(o=>t.resolve(e()).then((()=>{throw o}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e,t){"use strict";const o=(e,t)=>{const o=e.__vccOpts||e;for(const[n,i]of t)o[n]=i;return o},n=o({__name:"tab-control",props:{tabList:{type:Array,default:()=>[]},tabColor:{type:String,default:"black"},tabActiveColor:{type:String,default:"red"}},emits:["changeIndex"],setup(t,{emit:o}){const n=e.ref(0);return(i,r)=>(e.openBlock(),e.createElementBlock("view",{class:"tab-control"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.tabList,((i,r)=>(e.openBlock(),e.createElementBlock("view",{key:i,class:"tab-item",style:e.normalizeStyle({color:n.value===r?t.tabActiveColor:t.tabColor,borderColor:n.value===r?t.tabActiveColor:""}),onClick:e=>(e=>{n.value!==e&&(n.value=e,o("changeIndex",e))})(r)},e.toDisplayString(i),13,["onClick"])))),128))]))}},[["__scopeId","data-v-bc40e256"]]);function i(e,t,...o){uni.__log__?uni.__log__(e,t,...o):console[e].apply(console,[...o,t])}function r(e,o){return t.isString(e)?o:e}const a=t=>(o,n=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,o,n)},l=a("onLoad"),s=a("onReachBottom"),c=o({__name:"shop-item",props:{imgUrl:{type:String,default:""},title:{type:String,default:""},price:{type:String,default:""},collectCounter:{type:String,default:"0"}},setup(t){const o=t,n=e.computed((()=>`¥${o.price}`));return(o,i)=>(e.openBlock(),e.createElementBlock("view",{class:"shop-item"},[e.createElementVNode("image",{class:"shop-image","lazy-load":!0,src:t.imgUrl,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"shop-title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"other-info"},[e.createElementVNode("view",{class:"shop-price"},e.toDisplayString(e.unref(n)),1),e.createElementVNode("image",{class:"star-icon",src:"/static/images/common/favor.png",mode:"heightFix"}),e.createElementVNode("view",{class:"collect-counter"},e.toDisplayString(t.collectCounter),1)])]))}},[["__scopeId","data-v-73ad3fdf"]]);const d=o({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((e,t)=>{e===this&&this.grid.children.splice(t,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(t,o,n,i,r,a){return r.width?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle("width:"+r.width+";"+(r.square?"height:"+r.width:"")),class:"uni-grid-item"},[e.createElementVNode("view",{class:e.normalizeClass([{"uni-grid-item--border":r.showBorder,"uni-grid-item--border-top":r.showBorder&&n.index<r.column,"uni-highlight":r.highlight},"uni-grid-item__box"]),style:e.normalizeStyle({"border-right-color":r.borderColor,"border-bottom-color":r.borderColor,"border-top-color":r.borderColor}),onClick:o[0]||(o[0]=(...e)=>a._onClick&&a._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)],4)):e.createCommentVNode("",!0)}],["__scopeId","data-v-2511947d"]]);const u=o({name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((e=>{this.children.forEach(((t,o)=>{t.width=e}))}))}),50)},change(e){this.$emit("change",e)},_getSize(e){uni.createSelectorQuery().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.width=parseInt((t[0].width-1)/this.column)+"px",e(this.width)}))}}},[["render",function(t,o,n,i,r,a){return e.openBlock(),e.createElementBlock("view",{class:"uni-grid-wrap"},[e.createElementVNode("view",{id:r.elId,ref:"uni-grid",class:e.normalizeClass(["uni-grid",{"uni-grid--border":n.showBorder}]),style:e.normalizeStyle({"border-left-color":n.borderColor})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],14,["id"])])}],["__scopeId","data-v-a6acbddc"]]);
/*!
    * pinia v2.0.33
    * (c) 2023 Eduardo San Martin Morote
    * @license MIT
    */
let p;const h=e=>p=e,m=Symbol();function g(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var f,v;(v=f||(f={})).direct="direct",v.patchObject="patch object",v.patchFunction="patch function";const y=()=>{};function w(t,o,n,i=y){t.push(o);const r=()=>{const e=t.indexOf(o);e>-1&&(t.splice(e,1),i())};return!n&&e.getCurrentScope()&&e.onScopeDispose(r),r}function b(e,...t){e.slice().forEach((e=>{e(...t)}))}function k(t,o){t instanceof Map&&o instanceof Map&&o.forEach(((e,o)=>t.set(o,e))),t instanceof Set&&o instanceof Set&&o.forEach(t.add,t);for(const n in o){if(!o.hasOwnProperty(n))continue;const i=o[n],r=t[n];g(r)&&g(i)&&t.hasOwnProperty(n)&&!e.isRef(i)&&!e.isReactive(i)?t[n]=k(r,i):t[n]=i}return t}const _=Symbol();const{assign:B}=Object;function E(t,o,n={},i,r,a){let l;const s=B({actions:{}},n),c={deep:!0};let d,u,p,m=e.markRaw([]),v=e.markRaw([]);const E=i.state.value[t];let C;function S(o){let n;d=u=!1,"function"==typeof o?(o(i.state.value[t]),n={type:f.patchFunction,storeId:t,events:p}):(k(i.state.value[t],o),n={type:f.patchObject,payload:o,storeId:t,events:p});const r=C=Symbol();e.nextTick().then((()=>{C===r&&(d=!0)})),u=!0,b(m,n,i.state.value[t])}a||E||(i.state.value[t]={}),e.ref({});const A=a?function(){const{state:e}=n,t=e?e():{};this.$patch((e=>{B(e,t)}))}:y;function L(e,o){return function(){h(i);const n=Array.from(arguments),r=[],a=[];function l(e){r.push(e)}function s(e){a.push(e)}let c;b(v,{args:n,name:e,store:V,after:l,onError:s});try{c=o.apply(this&&this.$id===t?this:V,n)}catch(d){throw b(a,d),d}return c instanceof Promise?c.then((e=>(b(r,e),e))).catch((e=>(b(a,e),Promise.reject(e)))):(b(r,c),c)}}const I={_p:i,$id:t,$onAction:w.bind(null,v),$patch:S,$reset:A,$subscribe(o,n={}){const r=w(m,o,n.detached,(()=>a())),a=l.run((()=>e.watch((()=>i.state.value[t]),(e=>{("sync"===n.flush?u:d)&&o({storeId:t,type:f.direct,events:p},e)}),B({},c,n))));return r},$dispose:function(){l.stop(),m=[],v=[],i._s.delete(t)}},V=e.reactive(I);i._s.set(t,V);const x=i._e.run((()=>(l=e.effectScope(),l.run((()=>o())))));for(const h in x){const o=x[h];if(e.isRef(o)&&($=o,!e.isRef($)||!$.effect)||e.isReactive(o))a||(!E||g(N=o)&&N.hasOwnProperty(_)||(e.isRef(o)?o.value=E[h]:k(o,E[h])),i.state.value[t][h]=o);else if("function"==typeof o){const e=L(h,o);x[h]=e,s.actions[h]=o}}var N,$;return B(V,x),B(e.toRaw(V),x),Object.defineProperty(V,"$state",{get:()=>i.state.value[t],set:e=>{S((t=>{B(t,e)}))}}),i._p.forEach((e=>{B(V,l.run((()=>e({store:V,app:i._a,pinia:i,options:s}))))})),E&&a&&n.hydrate&&n.hydrate(V.$state,E),d=!0,u=!0,V}const C=new class{constructor(e){this.timeout=(null==e?void 0:e.timeout)||6e3,this.header=(null==e?void 0:e.header)||{},this.baseUrl=(null==e?void 0:e.baseUrl)||""}request(e,t,o,n){return new Promise(((i,r)=>{uni.request({url:this.baseUrl+e,method:t||void 0,data:o||void 0,timeout:this.timeout,header:{...this.header,...n},success:e=>{i(e.data)},fail:e=>{r(e)}})}))}get(e,t){return this.request(e,"GET",null,t)}post(e,t,o){return this.request(e,"POST",t,o)}}({baseUrl:"http://123.207.32.32:7888/api/hy66"}),S=[{title:"流行",type:"pop"},{title:"新款",type:"new"},{title:"精选",type:"sell"}],A=()=>{const e={};return S.forEach((t=>{e[t.type]={page:0,list:[]}})),e},L=function(t,o,n){let i,r;const a="function"==typeof o;function l(t,n){const l=e.getCurrentInstance();(t=t||l&&e.inject(m,null))&&h(t),(t=p)._s.has(i)||(a?E(i,o,r,t):function(t,o,n,i){const{state:r,actions:a,getters:l}=o,s=n.state.value[t];let c;c=E(t,(function(){s||(n.state.value[t]=r?r():{});const o=e.toRefs(n.state.value[t]);return B(o,a,Object.keys(l||{}).reduce(((o,i)=>(o[i]=e.markRaw(e.computed((()=>{h(n);const e=n._s.get(t);return l[i].call(e,e)}))),o)),{}))}),o,n,0,!0)}(i,r,t));return t._s.get(i)}return"string"==typeof t?(i=t,r=a?n:o):(r=t,i=t.id),l.$id=i,l}("home",{state:()=>({bannerList:[],recommendList:[],dKeywordList:[],keywordsList:[],goodsList:A()}),getters:{},actions:{async getBannerData(){var e,t,o,n,i,r,a,l;const s=await C.get("/home/multidata");this.bannerList=(null==(t=null==(e=null==s?void 0:s.data)?void 0:e.banner)?void 0:t.list)||[],this.recommendList=(null==(n=null==(o=null==s?void 0:s.data)?void 0:o.recommend)?void 0:n.list)||[],this.dKeywordList=(null==(r=null==(i=null==s?void 0:s.data)?void 0:i.dKeyword)?void 0:r.list)||[],this.keywordsList=(null==(l=null==(a=null==s?void 0:s.data)?void 0:a.weywords)?void 0:l.list)||[]},async getShopListData(e="pop"){const t=this.goodsList[e].page+1,o=await C.get(`/home/data?type=${e}&page=${t}`);o.success&&(this.goodsList[e].page=t,this.goodsList[e].list.push(...o.data.list))}}}),I=o({__name:"home-banner",props:{bannerList:{type:Array,default:()=>[]}},emits:["clickEvent"],setup:(t,{emit:o})=>(n,i)=>(e.openBlock(),e.createElementBlock("view",{class:"home-banner"},[e.createElementVNode("swiper",{"indicator-dots":!0,autoplay:!0,"indicator-active-color":"#ff8198",interval:3e3,duration:1e3},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.bannerList,((t,n)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:t,onClick:e=>(e=>{o("clickEvent",e)})(n)},[e.createElementVNode("view",{class:"swiper-item"},[e.createElementVNode("image",{class:"banner-image",src:t.image,mode:"widthFix"},null,8,["src"])])],8,["onClick"])))),128))])]))},[["__scopeId","data-v-ccae6866"]]),V=o({__name:"home-recommend",props:{recommendList:{type:Array,default:()=>[]}},emits:["clickEvent"],setup:(t,{emit:o})=>(n,i)=>(e.openBlock(),e.createElementBlock("view",{class:"home-recommend"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.recommendList,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"recommend-item",key:t,onClick:e=>(e=>{o("clickEvent",e)})(n)},[e.createElementVNode("image",{class:"recommend-image",src:t.image,mode:"widthFix"},null,8,["src"]),e.createElementVNode("text",{class:"recommend-title"},e.toDisplayString(t.title),1)],8,["onClick"])))),128))]))},[["__scopeId","data-v-09daf2f0"]]),x=o({__name:"home-popular",props:{title:{type:String,default:"default"}},setup:t=>(t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"home-popular"},[e.createElementVNode("image",{class:"popular-image",src:"/static/recommend_bg.jpg",mode:"widthFix"})]))},[["__scopeId","data-v-25219f15"]]),N={__name:"home",setup(t){const{bannerList:o,recommendList:i,goodsList:a,getBannerData:p,getShopListData:h}=e.toRefs(L()),m=e=>{uni.navigateTo({url:`/pages/webview/webview?link=${o.value[e].link}`})},g=e=>{uni.navigateTo({url:`/pages/webview/webview?link=${i.value[e].link}`})},f=S.map((e=>e.title)),v=e.ref(a.value.pop.list),y=e.ref(0),w=e=>{const t=S[e].type;v.value=a.value[t].list,y.value=e};return l((()=>{p.value(),S.forEach((e=>{h.value(e.type)}))})),s((()=>{h.value(S[y.value].type)})),(t,a)=>{const l=r(e.resolveDynamicComponent("tab-control"),n),s=r(e.resolveDynamicComponent("shop-item"),c),p=r(e.resolveDynamicComponent("uni-grid-item"),d),h=r(e.resolveDynamicComponent("uni-grid"),u);return e.openBlock(),e.createElementBlock("view",{class:"home"},[e.createVNode(I,{bannerList:e.unref(o),onClickEvent:m},null,8,["bannerList"]),e.createVNode(V,{recommendList:e.unref(i),onClickEvent:g},null,8,["recommendList"]),e.createVNode(x,{title:"本周流行"}),e.createVNode(l,{tabList:e.unref(f),tabActiveColor:"#ff8198",onChangeIndex:w},null,8,["tabList"]),e.createVNode(h,{column:2,square:!1,showBorder:!1,highlight:!1},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,((t,o)=>(e.openBlock(),e.createBlock(p,{key:t,index:o},{default:e.withCtx((()=>[e.createVNode(s,{imgUrl:t.show.img,title:t.title,price:t.price,collectCounter:t.cfav.toString(),onClick:e=>{return o=t.clientUrl,void uni.navigateTo({url:`/pages/webview/webview?link=${o}`});var o}},null,8,["imgUrl","title","price","collectCounter","onClick"])])),_:2},1032,["index"])))),128))])),_:1})])}}};const $=o({data:()=>({}),methods:{}},[["render",function(t,o,n,i,r,a){return e.openBlock(),e.createElementBlock("view")}]]);const U=o({data:()=>({}),methods:{}},[["render",function(t,o,n,i,r,a){return e.openBlock(),e.createElementBlock("view")}]]);const P=o({data:()=>({}),methods:{}},[["render",function(t,o,n,i,r,a){return e.openBlock(),e.createElementBlock("view")}]]);const D=o({data:()=>({}),methods:{}},[["render",function(t,o,n,i,r,a){return e.openBlock(),e.createElementBlock("view")}]]),R={__name:"webview",props:{link:{type:String,default:""}},setup:t=>(o,n)=>(e.openBlock(),e.createElementBlock("view",{class:"webview"},[e.createElementVNode("web-view",{src:t.link},null,8,["src"])]))};__definePage("pages/home/home",N),__definePage("pages/login/login",$),__definePage("pages/profile/profile",U),__definePage("pages/cart/cart",P),__definePage("pages/category/category",D),__definePage("pages/webview/webview",R);const j={onLaunch:function(){i("log","at App.vue:4","App Launch")},onShow:function(){i("log","at App.vue:7","App Show")},onHide:function(){i("log","at App.vue:10","App Hide")}};const{app:F,Vuex:O,Pinia:q}=function(){const t=e.createVueApp(j);return t.use(function(){const t=e.effectScope(!0),o=t.run((()=>e.ref({})));let n=[],i=[];const r=e.markRaw({install(e){h(r),r._a=e,e.provide(m,r),e.config.globalProperties.$pinia=r,i.forEach((e=>n.push(e))),i=[]},use(e){return this._a?n.push(e):i.push(e),this},_p:n,_a:null,_e:t,_s:new Map,state:o});return r}()),{app:t}}();uni.Vuex=O,uni.Pinia=q,F.provide("__globalStyles",__uniConfig.styles),F._component.mpType="app",F._component.render=()=>{},F.mount("#app")}(Vue,uni.VueShared);
